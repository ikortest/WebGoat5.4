{"language":"Java","type":"CompilationUnit","pid":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"org","loc":{"start":{"line":2},"end":{"line":2}}},"property":{"type":"Identifier","name":"owasp"},"loc":{"start":{"line":2},"end":{"line":2}}},"property":{"type":"Identifier","name":"webgoat"},"loc":{"start":{"line":2},"end":{"line":2}}},"property":{"type":"Identifier","name":"session"},"loc":{"start":{"line":2},"end":{"line":2}}},"annotations":[],"definitions":[{"type":"Import","qualid":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"java","loc":{"start":{"line":4},"end":{"line":4}}},"property":{"type":"Identifier","name":"util"},"loc":{"start":{"line":4},"end":{"line":4}}},"property":{"type":"Identifier","name":"ArrayList"},"loc":{"start":{"line":4},"end":{"line":4}}}},{"type":"Import","qualid":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"java","loc":{"start":{"line":5},"end":{"line":5}}},"property":{"type":"Identifier","name":"util"},"loc":{"start":{"line":5},"end":{"line":5}}},"property":{"type":"Identifier","name":"Collection"},"loc":{"start":{"line":5},"end":{"line":5}}}},{"type":"Import","qualid":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"java","loc":{"start":{"line":6},"end":{"line":6}}},"property":{"type":"Identifier","name":"util"},"loc":{"start":{"line":6},"end":{"line":6}}},"property":{"type":"Identifier","name":"HashMap"},"loc":{"start":{"line":6},"end":{"line":6}}}},{"type":"Import","qualid":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"java","loc":{"start":{"line":7},"end":{"line":7}}},"property":{"type":"Identifier","name":"util"},"loc":{"start":{"line":7},"end":{"line":7}}},"property":{"type":"Identifier","name":"Iterator"},"loc":{"start":{"line":7},"end":{"line":7}}}},{"type":"Import","qualid":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"java","loc":{"start":{"line":8},"end":{"line":8}}},"property":{"type":"Identifier","name":"util"},"loc":{"start":{"line":8},"end":{"line":8}}},"property":{"type":"Identifier","name":"Map"},"loc":{"start":{"line":8},"end":{"line":8}}}},{"type":"Import","qualid":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"org","loc":{"start":{"line":9},"end":{"line":9}}},"property":{"type":"Identifier","name":"apache"},"loc":{"start":{"line":9},"end":{"line":9}}},"property":{"type":"Identifier","name":"catalina"},"loc":{"start":{"line":9},"end":{"line":9}}},"property":{"type":"Identifier","name":"Role"},"loc":{"start":{"line":9},"end":{"line":9}}}},{"type":"Import","qualid":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"org","loc":{"start":{"line":10},"end":{"line":10}}},"property":{"type":"Identifier","name":"apache"},"loc":{"start":{"line":10},"end":{"line":10}}},"property":{"type":"Identifier","name":"catalina"},"loc":{"start":{"line":10},"end":{"line":10}}},"property":{"type":"Identifier","name":"User"},"loc":{"start":{"line":10},"end":{"line":10}}}},{"type":"Import","qualid":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"MemberExpression","object":{"type":"Identifier","name":"org","loc":{"start":{"line":11},"end":{"line":11}}},"property":{"type":"Identifier","name":"apache"},"loc":{"start":{"line":11},"end":{"line":11}}},"property":{"type":"Identifier","name":"catalina"},"loc":{"start":{"line":11},"end":{"line":11}}},"property":{"type":"Identifier","name":"users"},"loc":{"start":{"line":11},"end":{"line":11}}},"property":{"type":"Identifier","name":"MemoryUserDatabase"},"loc":{"start":{"line":11},"end":{"line":11}}}},{"type":"ClassDeclaration","id":{"type":"Identifier","name":"UserTracker"},"modifiers":{"type":"Modifiers","modifiers":["public"],"annotations":[]},"definitions":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"instance","vartype":{"type":"Identifier","name":"UserTracker","loc":{"start":{"line":48},"end":{"line":48}}}},"modifiers":{"type":"Modifiers","modifiers":["private","static"],"annotations":[]},"vartype":{"type":"Identifier","name":"UserTracker","loc":{"start":{"line":48},"end":{"line":48}}},"loc":{"start":{"line":48},"end":{"line":48}}},{"type":"VariableDeclarator","id":{"type":"Identifier","name":"storage","vartype":{"type":"Identifier","name":"HashMap","loc":{"start":{"line":52},"end":{"line":52}}}},"modifiers":{"type":"Modifiers","modifiers":["private","static"],"annotations":[]},"vartype":{"type":"Identifier","name":"HashMap","loc":{"start":{"line":52},"end":{"line":52}}},"init":{"type":"NewExpression","typeargs":[],"callee":{"type":"Identifier","name":"HashMap","loc":{"start":{"line":52},"end":{"line":52}}},"arguments":[],"loc":{"start":{"line":52},"end":{"line":52}}},"loc":{"start":{"line":52},"end":{"line":52}}},{"type":"VariableDeclarator","id":{"type":"Identifier","name":"usersDB","vartype":{"type":"Identifier","name":"MemoryUserDatabase","loc":{"start":{"line":54},"end":{"line":54}}}},"modifiers":{"type":"Modifiers","modifiers":["private","static"],"annotations":[]},"vartype":{"type":"Identifier","name":"MemoryUserDatabase","loc":{"start":{"line":54},"end":{"line":54}}},"init":{"type":"NewExpression","typeargs":[],"callee":{"type":"Identifier","name":"MemoryUserDatabase","loc":{"start":{"line":54},"end":{"line":54}}},"arguments":[],"loc":{"start":{"line":54},"end":{"line":54}}},"loc":{"start":{"line":54},"end":{"line":54}}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"\u003cinit\u003e"},"modifiers":{"type":"Modifiers","modifiers":["private"],"annotations":[]},"typarams":[],"params":[],"thrown":[],"body":{"type":"BlockStatement","body":[],"loc":{"start":{"line":60},"end":{"line":61}}},"code":"\nprivate \u003cinit\u003e() {\n}","loc":{"start":{"line":59},"end":{"line":61}}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"getCompleted"},"modifiers":{"type":"Modifiers","modifiers":["public"],"annotations":[]},"restype":{"type":"PrimitiveType"},"typarams":[],"params":[{"type":"Identifier","name":"userName","vartype":{"type":"Identifier","name":"String","loc":{"start":{"line":70},"end":{"line":70}}}}],"thrown":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"usermap","vartype":{"type":"Identifier","name":"HashMap","loc":{"start":{"line":73},"end":{"line":73}}}},"modifiers":{"type":"Modifiers","modifiers":[],"annotations":[]},"vartype":{"type":"Identifier","name":"HashMap","loc":{"start":{"line":73},"end":{"line":73}}},"init":{"type":"CallExpression","typeargs":[],"callee":{"type":"Identifier","name":"getUserMap","loc":{"start":{"line":73},"end":{"line":73}}},"arguments":[{"type":"Identifier","name":"userName","loc":{"start":{"line":73},"end":{"line":73}}}],"loc":{"start":{"line":73},"end":{"line":73}}},"loc":{"start":{"line":73},"end":{"line":73}}},{"type":"VariableDeclarator","id":{"type":"Identifier","name":"i","vartype":{"type":"Identifier","name":"Iterator","loc":{"start":{"line":75},"end":{"line":75}}}},"modifiers":{"type":"Modifiers","modifiers":[],"annotations":[]},"vartype":{"type":"Identifier","name":"Iterator","loc":{"start":{"line":75},"end":{"line":75}}},"init":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"usermap","loc":{"start":{"line":75},"end":{"line":75}}},"property":{"type":"Identifier","name":"entrySet"},"loc":{"start":{"line":75},"end":{"line":75}}},"arguments":[],"loc":{"start":{"line":75},"end":{"line":75}}},"property":{"type":"Identifier","name":"iterator"},"loc":{"start":{"line":75},"end":{"line":75}}},"arguments":[],"loc":{"start":{"line":75},"end":{"line":75}}},"loc":{"start":{"line":75},"end":{"line":75}}},{"type":"VariableDeclarator","id":{"type":"Identifier","name":"count","vartype":{"type":"PrimitiveType"}},"modifiers":{"type":"Modifiers","modifiers":[],"annotations":[]},"vartype":{"type":"PrimitiveType"},"init":{"type":"Literal","value":0,"raw":0},"loc":{"start":{"line":77},"end":{"line":77}}},{"type":"WhileStatement","test":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"i","loc":{"start":{"line":79},"end":{"line":79}}},"property":{"type":"Identifier","name":"hasNext"},"loc":{"start":{"line":79},"end":{"line":79}}},"arguments":[],"loc":{"start":{"line":79},"end":{"line":79}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"entry","vartype":{"type":"MemberExpression","object":{"type":"Identifier","name":"Map","loc":{"start":{"line":82},"end":{"line":82}}},"property":{"type":"Identifier","name":"Entry"},"loc":{"start":{"line":82},"end":{"line":82}}}},"modifiers":{"type":"Modifiers","modifiers":[],"annotations":[]},"vartype":{"type":"MemberExpression","object":{"type":"Identifier","name":"Map","loc":{"start":{"line":82},"end":{"line":82}}},"property":{"type":"Identifier","name":"Entry"},"loc":{"start":{"line":82},"end":{"line":82}}},"init":{"type":"TypeCast","clazz":{"type":"MemberExpression","object":{"type":"Identifier","name":"Map","loc":{"start":{"line":82},"end":{"line":82}}},"property":{"type":"Identifier","name":"Entry"},"loc":{"start":{"line":82},"end":{"line":82}}},"expression":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"i","loc":{"start":{"line":82},"end":{"line":82}}},"property":{"type":"Identifier","name":"next"},"loc":{"start":{"line":82},"end":{"line":82}}},"arguments":[],"loc":{"start":{"line":82},"end":{"line":82}}},"loc":{"start":{"line":82},"end":{"line":82}}},"loc":{"start":{"line":82},"end":{"line":82}}},{"type":"VariableDeclarator","id":{"type":"Identifier","name":"value","vartype":{"type":"PrimitiveType"}},"modifiers":{"type":"Modifiers","modifiers":[],"annotations":[]},"vartype":{"type":"PrimitiveType"},"init":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"TypeCast","clazz":{"type":"Identifier","name":"Integer","loc":{"start":{"line":84},"end":{"line":84}}},"expression":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"entry","loc":{"start":{"line":84},"end":{"line":84}}},"property":{"type":"Identifier","name":"getValue"},"loc":{"start":{"line":84},"end":{"line":84}}},"arguments":[],"loc":{"start":{"line":84},"end":{"line":84}}},"loc":{"start":{"line":84},"end":{"line":84}}},"property":{"type":"Identifier","name":"intValue"},"loc":{"start":{"line":84},"end":{"line":84}}},"arguments":[],"loc":{"start":{"line":84},"end":{"line":84}}},"loc":{"start":{"line":84},"end":{"line":84}}},{"type":"IfStatement","test":{"type":"BinaryExpression","operator":"GREATER_THAN","left":{"type":"Identifier","name":"value","loc":{"start":{"line":86},"end":{"line":86}}},"right":{"type":"Literal","value":5,"raw":5},"loc":{"start":{"line":86},"end":{"line":86}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"argument":{"type":"Identifier","name":"count","loc":{"start":{"line":88},"end":{"line":88}}},"type":"UpdateExpression","operator":"++","prefix":false},"loc":{"start":{"line":88},"end":{"line":88}}}],"loc":{"start":{"line":87},"end":{"line":89}}},"loc":{"start":{"line":86},"end":{"line":89}}}],"loc":{"start":{"line":80},"end":{"line":91}}},"loc":{"start":{"line":79},"end":{"line":91}}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"count","loc":{"start":{"line":93},"end":{"line":93}}},"loc":{"start":{"line":93},"end":{"line":93}}}],"loc":{"start":{"line":71},"end":{"line":94}}},"code":"\npublic int getCompleted(String userName) {\n    HashMap usermap \u003d getUserMap(userName);\n    Iterator i \u003d usermap.entrySet().iterator();\n    int count \u003d 0;\n    while (i.hasNext()) {\n        Map.Entry entry \u003d (Map.Entry)i.next();\n        int value \u003d ((Integer)entry.getValue()).intValue();\n        if (value \u003e 5) {\n            count++;\n        }\n    }\n    return count;\n}","loc":{"start":{"line":70},"end":{"line":94}}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"getUsers"},"modifiers":{"type":"Modifiers","modifiers":["public"],"annotations":[]},"restype":{"type":"Identifier","name":"Collection","loc":{"start":{"line":101},"end":{"line":101}}},"typarams":[],"params":[],"thrown":[],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"storage","loc":{"start":{"line":103},"end":{"line":103}}},"property":{"type":"Identifier","name":"keySet"},"loc":{"start":{"line":103},"end":{"line":103}}},"arguments":[],"loc":{"start":{"line":103},"end":{"line":103}}},"loc":{"start":{"line":103},"end":{"line":103}}}],"loc":{"start":{"line":102},"end":{"line":104}}},"code":"\npublic Collection getUsers() {\n    return storage.keySet();\n}","loc":{"start":{"line":101},"end":{"line":104}}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"getAllUsers"},"modifiers":{"type":"Modifiers","modifiers":["public"],"annotations":[]},"restype":{"type":"Identifier","name":"Collection","loc":{"start":{"line":106},"end":{"line":106}}},"typarams":[],"params":[{"type":"Identifier","name":"roleName","vartype":{"type":"Identifier","name":"String","loc":{"start":{"line":106},"end":{"line":106}}}}],"thrown":[],"body":{"type":"BlockStatement","body":[{"type":"SynchronizedStatement","lock":{"type":"Identifier","name":"usersDB","loc":{"start":{"line":108},"end":{"line":108}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"allUsers","vartype":{"type":"Identifier","name":"Collection","loc":{"start":{"line":110},"end":{"line":110}}}},"modifiers":{"type":"Modifiers","modifiers":[],"annotations":[]},"vartype":{"type":"Identifier","name":"Collection","loc":{"start":{"line":110},"end":{"line":110}}},"init":{"type":"NewExpression","typeargs":[],"callee":{"type":"Identifier","name":"ArrayList","loc":{"start":{"line":110},"end":{"line":110}}},"arguments":[],"loc":{"start":{"line":110},"end":{"line":110}}},"loc":{"start":{"line":110},"end":{"line":110}}},{"type":"TryStatement","handlers":[{"type":"CatchClause","param":{"type":"Identifier","name":"e","vartype":{"type":"Identifier","name":"Exception","loc":{"start":{"line":129},"end":{"line":129}}}},"body":{"type":"BlockStatement","body":[],"loc":{"start":{"line":130},"end":{"line":131}}},"loc":{"start":{"line":129},"end":{"line":131}}}],"block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"usersDB","loc":{"start":{"line":113},"end":{"line":113}}},"property":{"type":"Identifier","name":"open"},"loc":{"start":{"line":113},"end":{"line":113}}},"arguments":[],"loc":{"start":{"line":113},"end":{"line":113}}},"loc":{"start":{"line":113},"end":{"line":113}}},{"type":"VariableDeclarator","id":{"type":"Identifier","name":"users","vartype":{"type":"Identifier","name":"Iterator","loc":{"start":{"line":114},"end":{"line":114}}}},"modifiers":{"type":"Modifiers","modifiers":[],"annotations":[]},"vartype":{"type":"Identifier","name":"Iterator","loc":{"start":{"line":114},"end":{"line":114}}},"init":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"usersDB","loc":{"start":{"line":114},"end":{"line":114}}},"property":{"type":"Identifier","name":"getUsers"},"loc":{"start":{"line":114},"end":{"line":114}}},"arguments":[],"loc":{"start":{"line":114},"end":{"line":114}}},"loc":{"start":{"line":114},"end":{"line":114}}},{"type":"WhileStatement","test":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"users","loc":{"start":{"line":115},"end":{"line":115}}},"property":{"type":"Identifier","name":"hasNext"},"loc":{"start":{"line":115},"end":{"line":115}}},"arguments":[],"loc":{"start":{"line":115},"end":{"line":115}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"user","vartype":{"type":"Identifier","name":"User","loc":{"start":{"line":117},"end":{"line":117}}}},"modifiers":{"type":"Modifiers","modifiers":[],"annotations":[]},"vartype":{"type":"Identifier","name":"User","loc":{"start":{"line":117},"end":{"line":117}}},"init":{"type":"TypeCast","clazz":{"type":"Identifier","name":"User","loc":{"start":{"line":117},"end":{"line":117}}},"expression":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"users","loc":{"start":{"line":117},"end":{"line":117}}},"property":{"type":"Identifier","name":"next"},"loc":{"start":{"line":117},"end":{"line":117}}},"arguments":[],"loc":{"start":{"line":117},"end":{"line":117}}},"loc":{"start":{"line":117},"end":{"line":117}}},"loc":{"start":{"line":117},"end":{"line":117}}},{"type":"VariableDeclarator","id":{"type":"Identifier","name":"roles","vartype":{"type":"Identifier","name":"Iterator","loc":{"start":{"line":118},"end":{"line":118}}}},"modifiers":{"type":"Modifiers","modifiers":[],"annotations":[]},"vartype":{"type":"Identifier","name":"Iterator","loc":{"start":{"line":118},"end":{"line":118}}},"init":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"user","loc":{"start":{"line":118},"end":{"line":118}}},"property":{"type":"Identifier","name":"getRoles"},"loc":{"start":{"line":118},"end":{"line":118}}},"arguments":[],"loc":{"start":{"line":118},"end":{"line":118}}},"loc":{"start":{"line":118},"end":{"line":118}}},{"type":"WhileStatement","test":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"roles","loc":{"start":{"line":119},"end":{"line":119}}},"property":{"type":"Identifier","name":"hasNext"},"loc":{"start":{"line":119},"end":{"line":119}}},"arguments":[],"loc":{"start":{"line":119},"end":{"line":119}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"role","vartype":{"type":"Identifier","name":"Role","loc":{"start":{"line":121},"end":{"line":121}}}},"modifiers":{"type":"Modifiers","modifiers":[],"annotations":[]},"vartype":{"type":"Identifier","name":"Role","loc":{"start":{"line":121},"end":{"line":121}}},"init":{"type":"TypeCast","clazz":{"type":"Identifier","name":"Role","loc":{"start":{"line":121},"end":{"line":121}}},"expression":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"roles","loc":{"start":{"line":121},"end":{"line":121}}},"property":{"type":"Identifier","name":"next"},"loc":{"start":{"line":121},"end":{"line":121}}},"arguments":[],"loc":{"start":{"line":121},"end":{"line":121}}},"loc":{"start":{"line":121},"end":{"line":121}}},"loc":{"start":{"line":121},"end":{"line":121}}},{"type":"IfStatement","test":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"role","loc":{"start":{"line":122},"end":{"line":122}}},"property":{"type":"Identifier","name":"getRolename"},"loc":{"start":{"line":122},"end":{"line":122}}},"arguments":[],"loc":{"start":{"line":122},"end":{"line":122}}},"property":{"type":"Identifier","name":"trim"},"loc":{"start":{"line":122},"end":{"line":122}}},"arguments":[],"loc":{"start":{"line":122},"end":{"line":122}}},"property":{"type":"Identifier","name":"equals"},"loc":{"start":{"line":122},"end":{"line":122}}},"arguments":[{"type":"Identifier","name":"roleName","loc":{"start":{"line":122},"end":{"line":122}}}],"loc":{"start":{"line":122},"end":{"line":122}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"allUsers","loc":{"start":{"line":124},"end":{"line":124}}},"property":{"type":"Identifier","name":"add"},"loc":{"start":{"line":124},"end":{"line":124}}},"arguments":[{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"user","loc":{"start":{"line":124},"end":{"line":124}}},"property":{"type":"Identifier","name":"getUsername"},"loc":{"start":{"line":124},"end":{"line":124}}},"arguments":[],"loc":{"start":{"line":124},"end":{"line":124}}}],"loc":{"start":{"line":124},"end":{"line":124}}},"loc":{"start":{"line":124},"end":{"line":124}}}],"loc":{"start":{"line":123},"end":{"line":125}}},"loc":{"start":{"line":122},"end":{"line":125}}}],"loc":{"start":{"line":120},"end":{"line":126}}},"loc":{"start":{"line":119},"end":{"line":126}}}],"loc":{"start":{"line":116},"end":{"line":127}}},"loc":{"start":{"line":115},"end":{"line":127}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"usersDB","loc":{"start":{"line":128},"end":{"line":128}}},"property":{"type":"Identifier","name":"close"},"loc":{"start":{"line":128},"end":{"line":128}}},"arguments":[],"loc":{"start":{"line":128},"end":{"line":128}}},"loc":{"start":{"line":128},"end":{"line":128}}}],"loc":{"start":{"line":112},"end":{"line":129}}},"loc":{"start":{"line":111},"end":{"line":131}}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"allUsers","loc":{"start":{"line":132},"end":{"line":132}}},"loc":{"start":{"line":132},"end":{"line":132}}}],"loc":{"start":{"line":109},"end":{"line":133}}},"loc":{"start":{"line":108},"end":{"line":133}}}],"loc":{"start":{"line":107},"end":{"line":134}}},"code":"\npublic Collection\u003cString\u003e getAllUsers(String roleName) {\n    synchronized (usersDB) {\n        Collection\u003cString\u003e allUsers \u003d new ArrayList\u003cString\u003e();\n        try {\n            usersDB.open();\n            Iterator users \u003d usersDB.getUsers();\n            while (users.hasNext()) {\n                User user \u003d (User)users.next();\n                Iterator roles \u003d user.getRoles();\n                while (roles.hasNext()) {\n                    Role role \u003d (Role)roles.next();\n                    if (role.getRolename().trim().equals(roleName)) {\n                        allUsers.add(user.getUsername());\n                    }\n                }\n            }\n            usersDB.close();\n        } catch (Exception e) {\n        }\n        return allUsers;\n    }\n}","loc":{"start":{"line":106},"end":{"line":134}}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"deleteUser"},"modifiers":{"type":"Modifiers","modifiers":["public"],"annotations":[]},"restype":{"type":"PrimitiveType"},"typarams":[],"params":[{"type":"Identifier","name":"user","vartype":{"type":"Identifier","name":"String","loc":{"start":{"line":136},"end":{"line":136}}}}],"thrown":[],"body":{"type":"BlockStatement","body":[{"type":"SynchronizedStatement","lock":{"type":"Identifier","name":"usersDB","loc":{"start":{"line":138},"end":{"line":138}}},"body":{"type":"BlockStatement","body":[{"type":"TryStatement","handlers":[{"type":"CatchClause","param":{"type":"Identifier","name":"e","vartype":{"type":"Identifier","name":"Exception","loc":{"start":{"line":156},"end":{"line":156}}}},"body":{"type":"BlockStatement","body":[],"loc":{"start":{"line":157},"end":{"line":158}}},"loc":{"start":{"line":156},"end":{"line":158}}}],"block":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"usersDB","loc":{"start":{"line":142},"end":{"line":142}}},"property":{"type":"Identifier","name":"open"},"loc":{"start":{"line":142},"end":{"line":142}}},"arguments":[],"loc":{"start":{"line":142},"end":{"line":142}}},"loc":{"start":{"line":142},"end":{"line":142}}},{"type":"VariableDeclarator","id":{"type":"Identifier","name":"users","vartype":{"type":"Identifier","name":"Iterator","loc":{"start":{"line":143},"end":{"line":143}}}},"modifiers":{"type":"Modifiers","modifiers":[],"annotations":[]},"vartype":{"type":"Identifier","name":"Iterator","loc":{"start":{"line":143},"end":{"line":143}}},"init":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"usersDB","loc":{"start":{"line":143},"end":{"line":143}}},"property":{"type":"Identifier","name":"getUsers"},"loc":{"start":{"line":143},"end":{"line":143}}},"arguments":[],"loc":{"start":{"line":143},"end":{"line":143}}},"loc":{"start":{"line":143},"end":{"line":143}}},{"type":"WhileStatement","test":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"users","loc":{"start":{"line":144},"end":{"line":144}}},"property":{"type":"Identifier","name":"hasNext"},"loc":{"start":{"line":144},"end":{"line":144}}},"arguments":[],"loc":{"start":{"line":144},"end":{"line":144}}},"body":{"type":"BlockStatement","body":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"tomcatUser","vartype":{"type":"Identifier","name":"User","loc":{"start":{"line":146},"end":{"line":146}}}},"modifiers":{"type":"Modifiers","modifiers":[],"annotations":[]},"vartype":{"type":"Identifier","name":"User","loc":{"start":{"line":146},"end":{"line":146}}},"init":{"type":"TypeCast","clazz":{"type":"Identifier","name":"User","loc":{"start":{"line":146},"end":{"line":146}}},"expression":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"users","loc":{"start":{"line":146},"end":{"line":146}}},"property":{"type":"Identifier","name":"next"},"loc":{"start":{"line":146},"end":{"line":146}}},"arguments":[],"loc":{"start":{"line":146},"end":{"line":146}}},"loc":{"start":{"line":146},"end":{"line":146}}},"loc":{"start":{"line":146},"end":{"line":146}}},{"type":"IfStatement","test":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"tomcatUser","loc":{"start":{"line":147},"end":{"line":147}}},"property":{"type":"Identifier","name":"getUsername"},"loc":{"start":{"line":147},"end":{"line":147}}},"arguments":[],"loc":{"start":{"line":147},"end":{"line":147}}},"property":{"type":"Identifier","name":"equals"},"loc":{"start":{"line":147},"end":{"line":147}}},"arguments":[{"type":"Identifier","name":"user","loc":{"start":{"line":147},"end":{"line":147}}}],"loc":{"start":{"line":147},"end":{"line":147}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"usersDB","loc":{"start":{"line":149},"end":{"line":149}}},"property":{"type":"Identifier","name":"removeUser"},"loc":{"start":{"line":149},"end":{"line":149}}},"arguments":[{"type":"Identifier","name":"tomcatUser","loc":{"start":{"line":149},"end":{"line":149}}}],"loc":{"start":{"line":149},"end":{"line":149}}},"loc":{"start":{"line":149},"end":{"line":149}}},{"type":"BreakStatement","loc":{"start":{"line":151},"end":{"line":151}}}],"loc":{"start":{"line":148},"end":{"line":152}}},"loc":{"start":{"line":147},"end":{"line":152}}}],"loc":{"start":{"line":145},"end":{"line":153}}},"loc":{"start":{"line":144},"end":{"line":153}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"usersDB","loc":{"start":{"line":154},"end":{"line":154}}},"property":{"type":"Identifier","name":"close"},"loc":{"start":{"line":154},"end":{"line":154}}},"arguments":[],"loc":{"start":{"line":154},"end":{"line":154}}},"loc":{"start":{"line":154},"end":{"line":154}}}],"loc":{"start":{"line":141},"end":{"line":156}}},"loc":{"start":{"line":140},"end":{"line":158}}}],"loc":{"start":{"line":139},"end":{"line":159}}},"loc":{"start":{"line":138},"end":{"line":159}}}],"loc":{"start":{"line":137},"end":{"line":160}}},"code":"\npublic void deleteUser(String user) {\n    synchronized (usersDB) {\n        try {\n            usersDB.open();\n            Iterator users \u003d usersDB.getUsers();\n            while (users.hasNext()) {\n                User tomcatUser \u003d (User)users.next();\n                if (tomcatUser.getUsername().equals(user)) {\n                    usersDB.removeUser(tomcatUser);\n                    break;\n                }\n            }\n            usersDB.close();\n        } catch (Exception e) {\n        }\n    }\n}","loc":{"start":{"line":136},"end":{"line":160}}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"getLessonTracker"},"modifiers":{"type":"Modifiers","modifiers":["public"],"annotations":[]},"restype":{"type":"Identifier","name":"LessonTracker","loc":{"start":{"line":171},"end":{"line":171}}},"typarams":[],"params":[{"type":"Identifier","name":"s","vartype":{"type":"Identifier","name":"WebSession","loc":{"start":{"line":171},"end":{"line":171}}}},{"type":"Identifier","name":"screen","vartype":{"type":"Identifier","name":"Screen","loc":{"start":{"line":171},"end":{"line":171}}}}],"thrown":[],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"CallExpression","typeargs":[],"callee":{"type":"Identifier","name":"getLessonTracker","loc":{"start":{"line":173},"end":{"line":173}}},"arguments":[{"type":"Identifier","name":"s","loc":{"start":{"line":173},"end":{"line":173}}},{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"s","loc":{"start":{"line":173},"end":{"line":173}}},"property":{"type":"Identifier","name":"getUserName"},"loc":{"start":{"line":173},"end":{"line":173}}},"arguments":[],"loc":{"start":{"line":173},"end":{"line":173}}},{"type":"Identifier","name":"screen","loc":{"start":{"line":173},"end":{"line":173}}}],"loc":{"start":{"line":173},"end":{"line":173}}},"loc":{"start":{"line":173},"end":{"line":173}}}],"loc":{"start":{"line":172},"end":{"line":174}}},"code":"\npublic LessonTracker getLessonTracker(WebSession s, Screen screen) {\n    return getLessonTracker(s, s.getUserName(), screen);\n}","loc":{"start":{"line":171},"end":{"line":174}}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"getLessonTracker"},"modifiers":{"type":"Modifiers","modifiers":["public"],"annotations":[]},"restype":{"type":"Identifier","name":"LessonTracker","loc":{"start":{"line":176},"end":{"line":176}}},"typarams":[],"params":[{"type":"Identifier","name":"s","vartype":{"type":"Identifier","name":"WebSession","loc":{"start":{"line":176},"end":{"line":176}}}},{"type":"Identifier","name":"user","vartype":{"type":"Identifier","name":"String","loc":{"start":{"line":176},"end":{"line":176}}}},{"type":"Identifier","name":"screen","vartype":{"type":"Identifier","name":"Screen","loc":{"start":{"line":176},"end":{"line":176}}}}],"thrown":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"usermap","vartype":{"type":"Identifier","name":"HashMap","loc":{"start":{"line":178},"end":{"line":178}}}},"modifiers":{"type":"Modifiers","modifiers":[],"annotations":[]},"vartype":{"type":"Identifier","name":"HashMap","loc":{"start":{"line":178},"end":{"line":178}}},"init":{"type":"CallExpression","typeargs":[],"callee":{"type":"Identifier","name":"getUserMap","loc":{"start":{"line":178},"end":{"line":178}}},"arguments":[{"type":"Identifier","name":"user","loc":{"start":{"line":178},"end":{"line":178}}}],"loc":{"start":{"line":178},"end":{"line":178}}},"loc":{"start":{"line":178},"end":{"line":178}}},{"type":"VariableDeclarator","id":{"type":"Identifier","name":"tracker","vartype":{"type":"Identifier","name":"LessonTracker","loc":{"start":{"line":179},"end":{"line":179}}}},"modifiers":{"type":"Modifiers","modifiers":[],"annotations":[]},"vartype":{"type":"Identifier","name":"LessonTracker","loc":{"start":{"line":179},"end":{"line":179}}},"init":{"type":"TypeCast","clazz":{"type":"Identifier","name":"LessonTracker","loc":{"start":{"line":179},"end":{"line":179}}},"expression":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"usermap","loc":{"start":{"line":179},"end":{"line":179}}},"property":{"type":"Identifier","name":"get"},"loc":{"start":{"line":179},"end":{"line":179}}},"arguments":[{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"screen","loc":{"start":{"line":179},"end":{"line":179}}},"property":{"type":"Identifier","name":"getTitle"},"loc":{"start":{"line":179},"end":{"line":179}}},"arguments":[],"loc":{"start":{"line":179},"end":{"line":179}}}],"loc":{"start":{"line":179},"end":{"line":179}}},"loc":{"start":{"line":179},"end":{"line":179}}},"loc":{"start":{"line":179},"end":{"line":179}}},{"type":"IfStatement","test":{"type":"BinaryExpression","operator":"EQUAL_TO","left":{"type":"Identifier","name":"tracker","loc":{"start":{"line":180},"end":{"line":180}}},"right":{"type":"Literal"},"loc":{"start":{"line":180},"end":{"line":180}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","left":{"type":"Identifier","name":"tracker","loc":{"start":{"line":183},"end":{"line":183}}},"right":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"LessonTracker","loc":{"start":{"line":183},"end":{"line":183}}},"property":{"type":"Identifier","name":"load"},"loc":{"start":{"line":183},"end":{"line":183}}},"arguments":[{"type":"Identifier","name":"s","loc":{"start":{"line":183},"end":{"line":183}}},{"type":"Identifier","name":"user","loc":{"start":{"line":183},"end":{"line":183}}},{"type":"Identifier","name":"screen","loc":{"start":{"line":183},"end":{"line":183}}}],"loc":{"start":{"line":183},"end":{"line":183}}},"loc":{"start":{"line":183},"end":{"line":183}}},"loc":{"start":{"line":183},"end":{"line":183}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"usermap","loc":{"start":{"line":184},"end":{"line":184}}},"property":{"type":"Identifier","name":"put"},"loc":{"start":{"line":184},"end":{"line":184}}},"arguments":[{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"screen","loc":{"start":{"line":184},"end":{"line":184}}},"property":{"type":"Identifier","name":"getTitle"},"loc":{"start":{"line":184},"end":{"line":184}}},"arguments":[],"loc":{"start":{"line":184},"end":{"line":184}}},{"type":"Identifier","name":"tracker","loc":{"start":{"line":184},"end":{"line":184}}}],"loc":{"start":{"line":184},"end":{"line":184}}},"loc":{"start":{"line":184},"end":{"line":184}}}],"loc":{"start":{"line":181},"end":{"line":185}}},"loc":{"start":{"line":180},"end":{"line":185}}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"tracker","loc":{"start":{"line":188},"end":{"line":188}}},"loc":{"start":{"line":188},"end":{"line":188}}}],"loc":{"start":{"line":177},"end":{"line":189}}},"code":"\npublic LessonTracker getLessonTracker(WebSession s, String user, Screen screen) {\n    HashMap\u003cString, LessonTracker\u003e usermap \u003d getUserMap(user);\n    LessonTracker tracker \u003d (LessonTracker)usermap.get(screen.getTitle());\n    if (tracker \u003d\u003d null) {\n        tracker \u003d LessonTracker.load(s, user, screen);\n        usermap.put(screen.getTitle(), tracker);\n    }\n    return tracker;\n}","loc":{"start":{"line":176},"end":{"line":189}}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"getStatus"},"modifiers":{"type":"Modifiers","modifiers":["public"],"annotations":[]},"restype":{"type":"Identifier","name":"String","loc":{"start":{"line":200},"end":{"line":200}}},"typarams":[],"params":[{"type":"Identifier","name":"s","vartype":{"type":"Identifier","name":"WebSession","loc":{"start":{"line":200},"end":{"line":200}}}},{"type":"Identifier","name":"screen","vartype":{"type":"Identifier","name":"Screen","loc":{"start":{"line":200},"end":{"line":200}}}}],"thrown":[],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BinaryExpression","operator":"PLUS","left":{"type":"BinaryExpression","operator":"PLUS","left":{"type":"BinaryExpression","operator":"PLUS","left":{"type":"BinaryExpression","operator":"PLUS","left":{"type":"BinaryExpression","operator":"PLUS","left":{"type":"Literal","value":"User [","raw":"User ["},"right":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"s","loc":{"start":{"line":202},"end":{"line":202}}},"property":{"type":"Identifier","name":"getUserName"},"loc":{"start":{"line":202},"end":{"line":202}}},"arguments":[],"loc":{"start":{"line":202},"end":{"line":202}}},"loc":{"start":{"line":202},"end":{"line":202}}},"right":{"type":"Literal","value":"] has accessed ","raw":"] has accessed "},"loc":{"start":{"line":202},"end":{"line":202}}},"right":{"type":"Identifier","name":"screen","loc":{"start":{"line":202},"end":{"line":202}}},"loc":{"start":{"line":202},"end":{"line":202}}},"right":{"type":"Literal","value":" UserTracker:getStatus()LTH \u003d ","raw":" UserTracker:getStatus()LTH \u003d "},"loc":{"start":{"line":202},"end":{"line":202}}},"right":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"CallExpression","typeargs":[],"callee":{"type":"Identifier","name":"getLessonTracker","loc":{"start":{"line":202},"end":{"line":202}}},"arguments":[{"type":"Identifier","name":"s","loc":{"start":{"line":203},"end":{"line":203}}},{"type":"Identifier","name":"screen","loc":{"start":{"line":204},"end":{"line":204}}}],"loc":{"start":{"line":202},"end":{"line":204}}},"property":{"type":"Identifier","name":"hashCode"},"loc":{"start":{"line":202},"end":{"line":205}}},"arguments":[],"loc":{"start":{"line":202},"end":{"line":205}}},"loc":{"start":{"line":202},"end":{"line":205}}},"loc":{"start":{"line":202},"end":{"line":205}}}],"loc":{"start":{"line":201},"end":{"line":206}}},"code":"\npublic String getStatus(WebSession s, Screen screen) {\n    return (\"User [\" + s.getUserName() + \"] has accessed \" + screen + \" UserTracker:getStatus()LTH \u003d \" + getLessonTracker(s, screen).hashCode());\n}","loc":{"start":{"line":200},"end":{"line":206}}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"getUserMap"},"modifiers":{"type":"Modifiers","modifiers":["private"],"annotations":[]},"restype":{"type":"Identifier","name":"HashMap","loc":{"start":{"line":215},"end":{"line":215}}},"typarams":[],"params":[{"type":"Identifier","name":"userName","vartype":{"type":"Identifier","name":"String","loc":{"start":{"line":215},"end":{"line":215}}}}],"thrown":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"usermap","vartype":{"type":"Identifier","name":"HashMap","loc":{"start":{"line":218},"end":{"line":218}}}},"modifiers":{"type":"Modifiers","modifiers":[],"annotations":[]},"vartype":{"type":"Identifier","name":"HashMap","loc":{"start":{"line":218},"end":{"line":218}}},"init":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"storage","loc":{"start":{"line":218},"end":{"line":218}}},"property":{"type":"Identifier","name":"get"},"loc":{"start":{"line":218},"end":{"line":218}}},"arguments":[{"type":"Identifier","name":"userName","loc":{"start":{"line":218},"end":{"line":218}}}],"loc":{"start":{"line":218},"end":{"line":218}}},"loc":{"start":{"line":218},"end":{"line":218}}},{"type":"IfStatement","test":{"type":"BinaryExpression","operator":"EQUAL_TO","left":{"type":"Identifier","name":"usermap","loc":{"start":{"line":220},"end":{"line":220}}},"right":{"type":"Literal"},"loc":{"start":{"line":220},"end":{"line":220}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","left":{"type":"Identifier","name":"usermap","loc":{"start":{"line":223},"end":{"line":223}}},"right":{"type":"NewExpression","typeargs":[],"callee":{"type":"Identifier","name":"HashMap","loc":{"start":{"line":223},"end":{"line":223}}},"arguments":[],"loc":{"start":{"line":223},"end":{"line":223}}},"loc":{"start":{"line":223},"end":{"line":223}}},"loc":{"start":{"line":223},"end":{"line":223}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"storage","loc":{"start":{"line":225},"end":{"line":225}}},"property":{"type":"Identifier","name":"put"},"loc":{"start":{"line":225},"end":{"line":225}}},"arguments":[{"type":"Identifier","name":"userName","loc":{"start":{"line":225},"end":{"line":225}}},{"type":"Identifier","name":"usermap","loc":{"start":{"line":225},"end":{"line":225}}}],"loc":{"start":{"line":225},"end":{"line":225}}},"loc":{"start":{"line":225},"end":{"line":225}}}],"loc":{"start":{"line":221},"end":{"line":227}}},"loc":{"start":{"line":220},"end":{"line":227}}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"usermap","loc":{"start":{"line":229},"end":{"line":229}}},"loc":{"start":{"line":229},"end":{"line":229}}}],"loc":{"start":{"line":216},"end":{"line":230}}},"code":"\nprivate HashMap\u003cString, LessonTracker\u003e getUserMap(String userName) {\n    HashMap\u003cString, LessonTracker\u003e usermap \u003d storage.get(userName);\n    if (usermap \u003d\u003d null) {\n        usermap \u003d new HashMap\u003cString, LessonTracker\u003e();\n        storage.put(userName, usermap);\n    }\n    return (usermap);\n}","loc":{"start":{"line":215},"end":{"line":230}}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"instance"},"modifiers":{"type":"Modifiers","modifiers":["public","static","synchronized"],"annotations":[]},"restype":{"type":"Identifier","name":"UserTracker","loc":{"start":{"line":237},"end":{"line":237}}},"typarams":[],"params":[],"thrown":[],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"BinaryExpression","operator":"EQUAL_TO","left":{"type":"Identifier","name":"instance","loc":{"start":{"line":240},"end":{"line":240}}},"right":{"type":"Literal"},"loc":{"start":{"line":240},"end":{"line":240}}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","left":{"type":"Identifier","name":"instance","loc":{"start":{"line":243},"end":{"line":243}}},"right":{"type":"NewExpression","typeargs":[],"callee":{"type":"Identifier","name":"UserTracker","loc":{"start":{"line":243},"end":{"line":243}}},"arguments":[],"loc":{"start":{"line":243},"end":{"line":243}}},"loc":{"start":{"line":243},"end":{"line":243}}},"loc":{"start":{"line":243},"end":{"line":243}}}],"loc":{"start":{"line":241},"end":{"line":245}}},"loc":{"start":{"line":240},"end":{"line":245}}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"instance","loc":{"start":{"line":247},"end":{"line":247}}},"loc":{"start":{"line":247},"end":{"line":247}}}],"loc":{"start":{"line":238},"end":{"line":248}}},"code":"\npublic static synchronized UserTracker instance() {\n    if (instance \u003d\u003d null) {\n        instance \u003d new UserTracker();\n    }\n    return instance;\n}","loc":{"start":{"line":237},"end":{"line":248}}},{"type":"FunctionDeclaration","id":{"type":"Identifier","name":"update"},"modifiers":{"type":"Modifiers","modifiers":["public"],"annotations":[]},"restype":{"type":"PrimitiveType"},"typarams":[],"params":[{"type":"Identifier","name":"s","vartype":{"type":"Identifier","name":"WebSession","loc":{"start":{"line":258},"end":{"line":258}}}},{"type":"Identifier","name":"screen","vartype":{"type":"Identifier","name":"Screen","loc":{"start":{"line":258},"end":{"line":258}}}}],"thrown":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"tracker","vartype":{"type":"Identifier","name":"LessonTracker","loc":{"start":{"line":261},"end":{"line":261}}}},"modifiers":{"type":"Modifiers","modifiers":[],"annotations":[]},"vartype":{"type":"Identifier","name":"LessonTracker","loc":{"start":{"line":261},"end":{"line":261}}},"init":{"type":"CallExpression","typeargs":[],"callee":{"type":"Identifier","name":"getLessonTracker","loc":{"start":{"line":261},"end":{"line":261}}},"arguments":[{"type":"Identifier","name":"s","loc":{"start":{"line":261},"end":{"line":261}}},{"type":"Identifier","name":"screen","loc":{"start":{"line":261},"end":{"line":261}}}],"loc":{"start":{"line":261},"end":{"line":261}}},"loc":{"start":{"line":261},"end":{"line":261}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"tracker","loc":{"start":{"line":265},"end":{"line":265}}},"property":{"type":"Identifier","name":"store"},"loc":{"start":{"line":265},"end":{"line":265}}},"arguments":[{"type":"Identifier","name":"s","loc":{"start":{"line":265},"end":{"line":265}}},{"type":"Identifier","name":"screen","loc":{"start":{"line":265},"end":{"line":265}}}],"loc":{"start":{"line":265},"end":{"line":265}}},"loc":{"start":{"line":265},"end":{"line":265}}},{"type":"VariableDeclarator","id":{"type":"Identifier","name":"usermap","vartype":{"type":"Identifier","name":"HashMap","loc":{"start":{"line":267},"end":{"line":267}}}},"modifiers":{"type":"Modifiers","modifiers":[],"annotations":[]},"vartype":{"type":"Identifier","name":"HashMap","loc":{"start":{"line":267},"end":{"line":267}}},"init":{"type":"CallExpression","typeargs":[],"callee":{"type":"Identifier","name":"getUserMap","loc":{"start":{"line":267},"end":{"line":267}}},"arguments":[{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"s","loc":{"start":{"line":267},"end":{"line":267}}},"property":{"type":"Identifier","name":"getUserName"},"loc":{"start":{"line":267},"end":{"line":267}}},"arguments":[],"loc":{"start":{"line":267},"end":{"line":267}}}],"loc":{"start":{"line":267},"end":{"line":267}}},"loc":{"start":{"line":267},"end":{"line":267}}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"usermap","loc":{"start":{"line":268},"end":{"line":268}}},"property":{"type":"Identifier","name":"put"},"loc":{"start":{"line":268},"end":{"line":268}}},"arguments":[{"type":"CallExpression","typeargs":[],"callee":{"type":"MemberExpression","object":{"type":"Identifier","name":"screen","loc":{"start":{"line":268},"end":{"line":268}}},"property":{"type":"Identifier","name":"getTitle"},"loc":{"start":{"line":268},"end":{"line":268}}},"arguments":[],"loc":{"start":{"line":268},"end":{"line":268}}},{"type":"Identifier","name":"tracker","loc":{"start":{"line":268},"end":{"line":268}}}],"loc":{"start":{"line":268},"end":{"line":268}}},"loc":{"start":{"line":268},"end":{"line":268}}}],"loc":{"start":{"line":259},"end":{"line":270}}},"code":"\npublic void update(WebSession s, Screen screen) {\n    LessonTracker tracker \u003d getLessonTracker(s, screen);\n    tracker.store(s, screen);\n    HashMap\u003cString, LessonTracker\u003e usermap \u003d getUserMap(s.getUserName());\n    usermap.put(screen.getTitle(), tracker);\n}","loc":{"start":{"line":258},"end":{"line":270}}}],"loc":{"start":{"line":45},"end":{"line":272}}}],"loc":{"start":{"line":2},"end":{"line":272}},"sourcefile":"/Users/gli/codiscope/jacks.engine/WebGoat-5.4/WEB-INF/classes/org/owasp/webgoat/session/UserTracker.java"}